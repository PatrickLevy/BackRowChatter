<template name="UsersImport">
	<div style="overflow: hidden; margin-bottom:20px;">
		<div class="pull-right btn-group">
			<a class="btn btn-default" href="{{pathFor 'home'}}">Home</a>
			<a class="btn btn-default" href="{{pathFor 'dashboard'}}">Dashboard</a>
		</div>
		<div class="pull-left btn-group">
			<a class="btn btn-default" href="{{pathFor 'users.index'}}"><i class="fa fa-angle-double-left"></i> &nbsp; Manage Site Users</a>
		</div>
	</div>
	<div class="panel panel-primary">
		<div class="panel-heading">
			<h3 class="panel-title" style="font-weight: 300; letter-spacing: .12em;"><i class="fa fa-exclamation-triangle"></i> Read Me</h3>
		</div>
		<div class="panel-body">
			<label>Required Fields:</label>
			<ul>
				<li>name</li>
				<li>email</li>
				<li>username</li>
				<li>password</li>
			</ul>
			<label>Your CSV file/data should have the following format:</label>
			<pre style="font-size: .8em;">
// Header: Field order
name,email,username,password
// Data: User rows
John Smith,jsmith@example.com,jsmith,pass123
			</pre>
		</div>
	</div>
	<div class="panel panel-info">
		<div class="panel-heading">
			<h3 class="panel-title">Import Users (CSV)</h3>
		</div>
		<div class="panel-body">
			<div id="importCSVStatusMessages"></div>
			{{#if previewUsers}}
				<h4>How's it look?</h4>
				<p>If everything looks correct, click the 'Save Users' button below. If not, no worries. Simply click the 'Clear Results' link, fix the data, and try again.</p>
				<table class="table table-striped">
					<thead>
						<tr>
							{{#each fields}}
								<th>{{this}}</th>
							{{/each}}
						</tr>
					</thead>
					<tbody>
						{{#each previewUsers}}
							<tr>
								<td>{{name}}</td>
								<td>{{email}}</td>
								<td>{{username}}</td>
								<td>{{password}}</td>
							</tr>
						{{/each}}
					</tbody>
				</table>
				<div>
					<button class="btn btn-success" id="saveImportResults">Save Users</button>
					<button class="btn btn-link" id="clearImportResults">Clear Results</button>
				</div>
			{{else}}
				<form class="form" id="importUsersForm">
					<div class="form-group">
						<input type="file" name="localFile" id="localFile"/>
					</div>
					<div class="form-group">
						<textarea rows="8" name="csvString" id="csvString" class="form-control" placeholder="OR...paste CSV data here."></textarea>
					</div>
					<button type="submit" class="btn btn-primary">Import data</button>
					<a href="{{pathFor 'users.index'}}" class="btn btn-link">Cancel</a>
				</form>
			{{/if}}
		</div>
	</div>
</template>